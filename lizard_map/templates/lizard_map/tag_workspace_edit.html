{# Display edit-workspace #}
{% load i18n workspaces %}
<div id="edit-workspace"
     class="sidebarbox workspace"
     data-workspace-id="{{ workspace_edit.id }}"
     data-url-lizard-map-workspace-item-toggle="{% url lizard_map_workspace_item_toggle %}"
     data-url-lizard-map-workspace-item-delete="{% url lizard_map_workspace_item_delete %}"
     data-url-lizard-map-workspace-item-reorder="{% url lizard_map_workspace_item_reorder %}"
     data-url-lizard-map-workspace-item-edit="{% url lizard_map_workspace_edit_item %}"
     data-url-wms="{% url lizard_map_workspace_edit_wms %}"
     data-url-lizard-map-search-coordinates="{% url lizard_map.search_coordinates %}"
     data-url-lizard-map-search-name="{% url lizard_map.search_name %}"
     data-url-lizard-map-add-selection="{% url lizard_map_collage %}"
     data-url-lizard-map-workspace-item-extent="{% url lizard_map_workspace_item_extent %}"
     >
  <h2>
    <a id="workspace-empty"
       rel="tipsy-south"
       href="{% url lizard_map_workspace_empty %}"
       title="{% trans 'Empty your workspace' %}"
       class="title ss_sprite ss_delete sidebarbox-action-icon action-post-workspace-empty">
    </a>
    {% comment %}
    The added value of next link might not be obvious to a user, because workspace-load
    seems to offer comparable functionality. A subtle difference is that it reveals a
    URL to a read-only workspace, which you can send around via email.
    {% endcomment %}
    {% comment %}
    <a id="workspace-link-to-stored"
       rel="tipsy-south"
       href="{% url lizard_map_workspace_storage_list %}"
       title="{% trans 'Stored workspaces...' %}"
       class="title ss_sprite ss_database sidebarbox-action-icon ajax-dialog"
       data-size="xs">&nbsp;</a>
    {% endcomment %}
    <a id="workspace-save"
       rel="tipsy-south"
       href="{% url lizard_map_workspace_save %}"
       title="{% trans 'Save workspace...' %}"
       class="title ss_sprite ss_database_save sidebarbox-action-icon ajax-dialog"
       data-size="xs">&nbsp;</a>
    {% comment %}
    <a id="workspace-load"
       rel="tipsy-south"
       href="{% url lizard_map_workspace_load %}"
       title="{% trans 'Load workspace...' %}"
       class="title ss_sprite ss_database_go sidebarbox-action-icon ajax-dialog"
       data-size="xs">&nbsp;</a>
    {% endcomment %}
    <span rel="tipsy-southwest" title="{% trans 'This is your workspace. Hover your mouse over the containing items to see options.' %}">
      Workspace
    </span>
  </h2>
  <ul class="workspace-items without-bullets">
    {% for workspace_item in workspace_edit.workspace_items.all %}
    <li id="workspace-items-{{ workspace_item.id }}"
        class="workspace-item"
        title="{{ workspace_item.name }}"
        data-object-id="{{ workspace_item.id }}"
        data-adapter-class="{{ workspace_item.adapter_class }}"
        data-adapter-layer-json='{{ workspace_item.adapter_layer_json }}'
        data-visible="{{ workspace_item.visible }}">
      {# Legend. #}
      {% legend workspace_item.name workspace_item.adapter session %}
      {# Delete workspace item. Tipsy tooltips won't disappear. #}
      <span class="ss_sprite ss_delete sidebarbox-action-icon
                   workspace-item-delete"
	    rel="tipsy-south"
            title="{% trans 'Delete item' %}">
      </span>
      {# Pan to layer. #}
      {% if workspace_item.has_extent %}
      <span class="ss_sprite ss_magnifier sidebarbox-action-icon
                   workspace-item-pan-to"
            rel="tipsy"
            title="Zoom"></span>
      {% endif %}
      {# Symbol, appears left. #}
      <img class="workspace-item-image"
           src="{{ workspace_item.adapter.symbol_url }}"
           width="16"
           height="16" />
      <input id="{{ workspace_item.id }}"
             class="workspace-item-checkbox"
             type="checkbox"
             {% if workspace_item.visible %}
             checked="checked"
             {% endif %}
             data-workspace-id="{{ workspace.id }}" />
      <div class="workspace-item-name">
        {% firstof workspace_item.name '(noname)' %}
      </div>
    </li>
    {% empty %}
      {# No workspaceitems #}
      <li>{% trans 'Click on an item from the above list to add it to your workspace.' %}</li>
    {% endfor %}
  </ul>
</div>
