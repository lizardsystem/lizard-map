{# Shows one workspace. Options: show_new_workspace. #}
<div id="workspace-{{ workspace.id }}"
     class="sidebarbox workspace"
     data-workspace-id="{{ workspace.id }}"
     data-url-lizard-map-workspace-item-edit="{% url lizard_map_workspace_item_edit %}"
     data-url-lizard-map-workspace-item-reorder="{% url lizard_map_workspace_item_reorder %}"
     data-url-lizard-map-workspace-item-add="{% url lizard_map_workspace_item_add %}"
     data-url-lizard-map-workspace-item-delete="{% url lizard_map_workspace_item_delete %}"
     data-url-lizard-map-snippet-add="{% url lizard_map_session_collage_snippet_add %}"
     data-url-lizard-map-snippet-delete="{% url lizard_map_session_collage_snippet_delete %}"
     data-url-lizard-map-session-workspace-add-item-temp="{% url lizard_map_session_workspace_add_item_temp %}"
     data-url-lizard-map-collage-popup="{% url lizard_map.collage_popup %}"
     data-url-lizard-map-snippet-popup="{% url lizard_map.snippet_popup %}"
     >
  <h2>
    {{ workspace.name }}
    <a href="{% url lizard_map_workspace workspace_id=workspace.id %}"
       title="link to {{ workspace.name }}"
       class="title">
      <span class="ss_sprite ss_arrow_turn_right">&nbsp;</span>
    </a>
    {% if show_new_workspace %}
    <a href="?new_workspace" title="new workspace" class="title">
      <span class="ss_sprite ss_page_add">&nbsp;</span>
    </a>
    {% endif %}
    {% if date_range_form %}
    <span class="ss_sprite ss_calendar_view_day sidebarbox-action-icon popup-trigger"
          rel="#summary-datepicker">&nbsp;</span>
    {% endif %}
  </h2>
  <div>
    <div class="date-popup"
         id="summary-datepicker">
      <h1>Datumkeuze</h1>
      {% if date_range_form %}
      <div>
        <form action="{% url lizard_map.set_date_range %}"
              method="post">
          {% csrf_token %}
          {{ date_range_form.as_p }}
          <p><input type="submit" value="Nieuwe periode" /></p>
        </form>
      </div>
      {% endif %}
    </div>
    <ul class="workspace_items without-bullets"
        data-workspace-id="{{ workspace.id }}">
      {# Call updateWorkspaceBox to fill workspace. #}
      {% for workspace_item in workspace.workspace_items.all %}
      <li id="workspace-items-{{ workspace_item.id }}" {# necessary for reordering #}
          class="workspace-item"
          data-object-id="{{ workspace_item.id }}"
          data-workspace-id="{{ workspace.id }}">
        <img src="{{ workspace_item.symbol_url }}"
             width="16"
             height="16" />
        <input id="{{ workspace_item.id }}"
               class="workspace-item-checkbox"
               type="checkbox"
               {% if workspace_item.visible %}
               checked="checked"
               {% endif %}
               data-workspace-id="{{ workspace.id }}" />
        {% firstof workspace_item.name '(noname)' %}
      </li>
      {% empty %}
      {# No workspaceitems #}
      <li class="workspace-item">Drag items here</li>
      {% endfor %}
    </ul>
  </div>
  {% for collage in workspace.collages.all %}
  <h3 class="collage"
      data-collage-id="{{ collage.id }}">{{ collage.name }}</h3>
  <div>
    <ul class="snippet-list without-bullets"
        data-collage-id="{{ collage.id }}">
      {% for snippet in collage.snippets.all %}
      <li class="snippet" title="{{ snippet.name }}"
          data-object-id="{{ snippet.id }}">
        <img src="{{ snippet.workspace_item.symbol_url }}"
             width="16"
             height="16" />
        {% firstof snippet.shortname snippet.name '(noname)' %}
      </li>
      {% empty %}
      <li class="snippet">no snippets...</li>
      {% endfor %}
    </ul>
  </div>
  {% endfor %}

  {# Look up icon classes in http://www.ajaxbestiary.com/Labs/SilkSprite/ #}
  <div class="sidebarbox-actions">
    <div class="workspace-trash"><span class="ss_sprite ss_bin_empty">trash</span></div>
    <!--
        <div class="workspace_new"><span class="ss_sprite ss_page_add">new</span></div>
        <div class="workspace_load"><span class="ss_sprite ss_page_go">load</span></div>
        <div class="workspace_save"><span class="ss_sprite ss_page_save">save</span></div>
        <div class="workspace_date"><span class="ss_sprite ss_date">period</span></div>
    -->
  </div>
</div>
