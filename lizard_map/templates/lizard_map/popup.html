{% comment %}

Popup and full-page visualization of snippet group. This popup.html is
the default template for the html_default method.

{% endcomment %}

{% load workspaces %}
{# header #}
<div><img src="{{ symbol_url }}" /><strong>{{ title }}</strong></div>
<div style="width: 100%; height: 200px;" class="img-use-my-size">
  <a href="{{ img_url }}" class="replace-with-image">afbeelding nog niet geladen</a>
</div>
<table>
  <tr>
    <th>Naam</th>
    <th>Export</th>
    {% if editing %}<th>Bewerken</th>{% endif %}
    {% if add_snippet %}<th>Toevoegen</th>{% endif %}
  </tr>
  {% if editing %}
  <tr>
    <td>Hele grafiek</td>
    <td></td>
    <td>
      {# na klik komt er een popup met opties voor drempelwaarde, bewerkingsperiode, titel, etc... #}
      {% if snippet_group %}
      {# This popup refers to #graph_edit_overlay. The overlay must be created outside the popup. #}
      <span class="ss_chart_curve_edit ss_sprite graph_edit_trigger"
            title="Bewerk grafiek"
            rel="#graph_edit_overlay">
      </span>
      <div id="graph_edit_overlay" class="popup">
        <form class="graph-options"
              data-url="{% url lizard_map.snippet_group_graph_edit snippet_group_id=snippet_group.id %}">
          <p>Titel<input class="title" type="text" name="title" /></p>
          <p>Y-min<input class="title" type="text" name="title" /></p>
          <p>Y-max<input class="title" type="text" name="title" /></p>
          <p>Y-label<input class="title" type="text" name="title" /></p>
          <p>X-label<input class="title" type="text" name="title" /></p>
          <p>Drempelwaarde<input class="title" type="text" name="title" /></p>
          <p>25-percentiel<input class="title" type="text" name="title" /></p>
          <p>75-percentiel<input class="title" type="text" name="title" /></p>
          <p><input class="graph-action" type="button" value="Update grafiek" /></p>
        </form>
      </div>
      {% endif %}
    </td>
    {% if add_snippet %}<td></td>{% endif %}
  </tr>
  {% endif %}
  {# icons: see http://www.ajaxbestiary.com/Labs/SilkSprite/ #}
  {% for display_object in display_group %}
  <tr>
    <td>{{ display_object.name }}</td>
    <td><a href="{% url lizard_map.export_identifier_csv %}?workspace_item_id={{ display_object.workspace_item.id }}&identifier_json={{ display_object.identifier|json_escaped }}"
           class="ss_table_save ss_sprite"
           title="Export csv"
           >&nbsp;</a></td>
    {% if editing %}<td><a href="{{ display_object.object.get_absolute_url }}" class="ss_chart_curve_edit ss_sprite" title="Bewerk lijn"></a></td>{% endif %}
    {% if add_snippet %}<td><a href=""
    class="add-snippet ss_chart_line_add ss_sprite"
    data-workspace-id="{{ display_object.workspace_item.workspace.id }}"
    data-workspace-item-id="{{ display_object.workspace_item.id }}"
    data-item-identifier='{{ display_object.identifier|json_escaped }}'
    data-item-shortname="{{ display_object.shortname }}"
    data-item-name="{{ display_object.name }}"
    title="Voeg toe aan collage"></a></td>{% endif %}
  </tr>
  {% endfor %}
</table>
